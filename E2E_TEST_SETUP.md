# E2Eテストのセットアップと実行方法

## セットアップ

1. Playwrightのブラウザをインストール:
```bash
npx playwright install
```

2. 開発サーバーを起動（別ターミナル）:
```bash
npm run dev
```

3. テストを実行:
```bash
npm run test:e2e
```

## テスト内容

以下のテストが含まれています：

1. **パスワード設定待ちユーザー**: `next=/setup-password` パラメータでリダイレクト
2. **Callback URL**: `next`パラメータなしでリダイレクト（デフォルト動作）
3. **リダイレクトレスポンス**: ステータスコード307とLocationヘッダーの検証
4. **setup-passwordページ**: 未認証ユーザーのアクセス制御
5. **ログインページ**: 正しく表示されることを確認
6. **統合テスト**: Callback URLのリダイレクトロジックの検証

## 注意事項

- 実際のSupabase認証をテストするには、有効な`code`パラメータが必要です
- 現在のテストは、`code`パラメータがない場合のエラーハンドリングを検証します
- 実際のMagic Link認証フローをテストするには、実際のメール送信が必要です




